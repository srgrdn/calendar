# Тестирование приложения "Календарь рабочих дней по графику 2/2"

В этом документе описаны тесты, созданные для проверки функциональности приложения, и инструкции по их запуску.

## Структура тестов

Тесты разделены на несколько категорий:

1. **Модульные тесты** (`tests.py`):
   - `AuthTestCase` - тесты аутентификации (регистрация, вход, выход)
   - `CalendarTestCase` - тесты логики календаря и расчета рабочих дней
   - `MessageTestCase` - тесты функциональности сообщений
   - `ModelTestCase` - тесты моделей данных

2. **Интеграционные тесты** (`integration_tests.py`):
   - `IntegrationTestCase` - тесты взаимодействия компонентов приложения

3. **Функциональные тесты** (`functional_tests.py`):
   - `FunctionalTestCase` - тесты пользовательских сценариев с использованием Selenium

4. **Тесты на основе pytest** (`test_pytest.py`):
   - `TestAuth` - тесты аутентификации
   - `TestCalendar` - тесты календаря
   - `TestMessage` - тесты сообщений
   - `TestModels` - тесты моделей

## Запуск тестов

### Запуск всех тестов unittest

```bash
python run_tests.py
```

### Запуск тестов с отчетом о покрытии кода

```bash
python run_tests_with_coverage.py
```

После выполнения будет создан HTML-отчет о покрытии кода в директории `coverage_html/`.

### Запуск тестов с помощью pytest

```bash
pytest test_pytest.py -v
```

### Запуск функциональных тестов

```bash
python functional_tests.py
```

**Примечание:** Для запуска функциональных тестов требуется установленный Selenium и ChromeDriver.

## Настройка окружения для тестирования

1. Установите зависимости для тестирования:

```bash
pip install -r requirements.txt
```

2. Для функциональных тестов установите ChromeDriver:

```bash
# Для Ubuntu/Debian
apt-get install chromium-chromedriver

# Для macOS с Homebrew
brew install --cask chromedriver
```

## Структура тестовых файлов

- `tests.py` - основные модульные тесты на основе unittest
- `integration_tests.py` - интеграционные тесты
- `functional_tests.py` - функциональные тесты с использованием Selenium
- `test_pytest.py` - тесты на основе pytest
- `conftest.py` - общие фикстуры для pytest
- `run_tests.py` - скрипт для запуска всех тестов unittest
- `run_tests_with_coverage.py` - скрипт для запуска тестов с отчетом о покрытии кода

## Непрерывная интеграция (CI)

Для настройки непрерывной интеграции можно добавить следующий шаг в файл `.github/workflows/deploy.yml`:

```yaml
- name: Run Tests
  run: |
    pip install -r requirements.txt
    python run_tests.py
```

## Добавление новых тестов

При добавлении новой функциональности в приложение рекомендуется:

1. Создать модульные тесты для новых функций
2. Обновить интеграционные тесты для проверки взаимодействия с существующими компонентами
3. Добавить функциональные тесты для новых пользовательских сценариев
4. Обновить тесты pytest

## Советы по тестированию

- Используйте фикстуры для настройки тестового окружения
- Изолируйте тесты друг от друга
- Используйте моки для внешних зависимостей
- Регулярно запускайте тесты с отчетом о покрытии кода
- Стремитесь к покрытию кода не менее 80%